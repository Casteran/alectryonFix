<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.16: http://docutils.sourceforge.net/" />
<title>Forget abut strengthening induction hypotheses: write fixpoints!</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="tango_subtle.css" type="text/css" />
<link rel="stylesheet" href="tango_subtle.min.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
</head>
<body>
<div class="alectryon-root alectryon-standalone alectryon-centered"><div class="document" id="forget-abut-strengthening-induction-hypotheses-write-fixpoints">
<h1 class="title">Forget abut strengthening induction hypotheses: write fixpoints!</h1>

<p>Here's an <em>inductive specification</em> of evenness:</p>
<pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Inductive</span> <span class="nf">Even</span> : nat -&gt; <span class="kt">Prop</span> :=
| EvenO : Even O
| EvenS : <span class="kr">forall</span> <span class="nv">n</span>, Even n -&gt; Even (S (S n)).</span></span></span></pre><p>… and a corresponding decision procedure:</p>
<pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">even</span> (<span class="nv">n</span>: nat): bool :=
  <span class="kr">match</span> n <span class="kr">with</span>
  | <span class="mi">0</span> =&gt; true
  | <span class="mi">1</span> =&gt; false
  | S (S n) =&gt; even n
  <span class="kr">end</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
<span class="c">(* Ensure that we never unfold [even (S n)] *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Arguments</span> even : <span class="nb">simpl</span> nomatch.</span></span></span></pre><p>Can we prove it correct?</p>
<pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="document-v-rst-chk0" type="checkbox"><label class="coq-input" for="document-v-rst-chk0"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">even_Even</span> :
  <span class="kr">forall</span> <span class="nv">n</span>, even n = true &lt;-&gt; Even n.</span></label><div class="coq-output" id="document-v-rst-goal0"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, even n = true &lt;-&gt; Even n</span></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="document-v-rst-chk1" type="checkbox"><label class="coq-input" for="document-v-rst-chk1"><span class="highlight"><span class="kn">Proof</span>.</span></label><div class="coq-output" id="document-v-rst-goal1"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, even n = true &lt;-&gt; Even n</span></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk2" type="checkbox"><label class="coq-input" for="document-v-rst-chk2"><span class="highlight"><span class="nb">induction</span> n.</span></label><div class="coq-output" id="document-v-rst-goal2"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">even <span class="mi">0</span> = true &lt;-&gt; Even <span class="mi">0</span></span></div></div><input class="coq-extra-goals-toggle" id="document-v-rst-chk3" type="checkbox"><label class="coq-extra-goals-label" for="document-v-rst-chk3">1 more goal</label><div class="coq-extra-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even n = true &lt;-&gt; Even n</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">even (S n) = true &lt;-&gt; Even (S n)</span></div></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk4" type="checkbox"><label class="coq-input" for="document-v-rst-chk4"><span class="highlight"><span class="kp">all</span>: <span class="nb">cbn</span>.</span></label><div class="coq-output" id="document-v-rst-goal3"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">true = true &lt;-&gt; Even <span class="mi">0</span></span></div></div><input class="coq-extra-goals-toggle" id="document-v-rst-chk5" type="checkbox"><label class="coq-extra-goals-label" for="document-v-rst-chk5">1 more goal</label><div class="coq-extra-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even n = true &lt;-&gt; Even n</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">even (S n) = true &lt;-&gt; Even (S n)</span></div></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk6" type="checkbox"><label class="coq-input" for="document-v-rst-chk6"><span class="highlight">- <span class="c">(* n ← 0 *)</span></span></label><div class="coq-output" id="document-v-rst-goal4"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">true = true &lt;-&gt; Even <span class="mi">0</span></span></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk7" type="checkbox"><label class="coq-input" for="document-v-rst-chk7"><span class="highlight"><span class="nb">split</span>.</span></label><div class="coq-output" id="document-v-rst-goal5"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">true = true -&gt; Even <span class="mi">0</span></span></div></div><input class="coq-extra-goals-toggle" id="document-v-rst-chk8" type="checkbox"><label class="coq-extra-goals-label" for="document-v-rst-chk8">1 more goal</label><div class="coq-extra-goals"><div class="coq-goal"><div class="goal-hyps"></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">Even <span class="mi">0</span> -&gt; true = true</span></div></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kp">all</span>: <span class="nb">constructor</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk9" type="checkbox"><label class="coq-input" for="document-v-rst-chk9"><span class="highlight">- <span class="c">(* n ← S _ *)</span></span></label><div class="coq-output" id="document-v-rst-goal6"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even n = true &lt;-&gt; Even n</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">even (S n) = true &lt;-&gt; Even (S n)</span></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chka" type="checkbox"><label class="coq-input" for="document-v-rst-chka"><span class="highlight"><span class="nb">apply</span> IHn. <span class="c">(* stuck! *)</span></span></label><div class="coq-output" id="document-v-rst-goal7"><div class="coq-output-sticky-wrapper"><div class="coq-responses"><div class="coq-response"><span class="highlight">In environment
n : nat
IHn : even n = true &lt;-&gt; Even n
Unable to <span class="nb">unify</span> <span class="s2">&quot;even n = true &lt;-&gt; Even n&quot;</span> <span class="kr">with</span>
 <span class="s2">&quot;even (S n) = true &lt;-&gt; Even (S n)&quot;</span>.</span></div></div></div></div></span></pre><p>The induction hypothesis doesn't apply — maybe we need to destruct <tt class="docutils literal">n</tt>?</p>
<pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">    </span></span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chkb" type="checkbox"><label class="coq-input" for="document-v-rst-chkb"><span class="highlight"><span class="nb">destruct</span> n.</span></label><div class="coq-output" id="document-v-rst-goal8"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">IHn</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even <span class="mi">0</span> = true &lt;-&gt; Even <span class="mi">0</span></span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">even <span class="mi">1</span> = true &lt;-&gt; Even <span class="mi">1</span></span></div></div><input class="coq-extra-goals-toggle" id="document-v-rst-chkc" type="checkbox"><label class="coq-extra-goals-label" for="document-v-rst-chkc">1 more goal</label><div class="coq-extra-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even (S n) = true &lt;-&gt; Even (S n)</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">even (S (S n)) = true &lt;-&gt; Even (S (S n))</span></div></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chkd" type="checkbox"><label class="coq-input" for="document-v-rst-chkd"><span class="highlight">+ <span class="c">(* n ← 1 *)</span></span></label><div class="coq-output" id="document-v-rst-goal9"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">IHn</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even <span class="mi">0</span> = true &lt;-&gt; Even <span class="mi">0</span></span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">even <span class="mi">1</span> = true &lt;-&gt; Even <span class="mi">1</span></span></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">split</span>; <span class="nb">inversion</span> <span class="mi">1</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chke" type="checkbox"><label class="coq-input" for="document-v-rst-chke"><span class="highlight">+ <span class="c">(* n ← S (S _) *)</span></span></label><div class="coq-output" id="document-v-rst-goala"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even (S n) = true &lt;-&gt; Even (S n)</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">even (S (S n)) = true &lt;-&gt; Even (S (S n))</span></div></div></div></div></div></span></pre><p>Stuck again!</p>
<pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Abort</span>.</span></span></span></pre><div class="section" id="strengthening-the-spec">
<h1>Strengthening the spec</h1>
<p>The usual approach is to strengthen the spec to work around the weakness of the inductive principle.</p>
<pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="document-v-rst-chkf" type="checkbox"><label class="coq-input" for="document-v-rst-chkf"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">even_Even</span> :
  <span class="kr">forall</span> <span class="nv">n</span>, (even n = true &lt;-&gt; Even n) /\
       (even (S n) = true &lt;-&gt; Even (S n)).</span></label><div class="coq-output" id="document-v-rst-goalb"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
(even n = true &lt;-&gt; Even n) /\
(even (S n) = true &lt;-&gt; Even (S n))</span></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="document-v-rst-chk10" type="checkbox"><label class="coq-input" for="document-v-rst-chk10"><span class="highlight"><span class="kn">Proof</span>.</span></label><div class="coq-output" id="document-v-rst-goalc"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
(even n = true &lt;-&gt; Even n) /\
(even (S n) = true &lt;-&gt; Even (S n))</span></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk11" type="checkbox"><label class="coq-input" for="document-v-rst-chk11"><span class="highlight"><span class="nb">induction</span> n; <span class="nb">cbn</span>.</span></label><div class="coq-output" id="document-v-rst-goald"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">(true = true &lt;-&gt; Even <span class="mi">0</span>) /\ (false = true &lt;-&gt; Even <span class="mi">1</span>)</span></div></div><input class="coq-extra-goals-toggle" id="document-v-rst-chk12" type="checkbox"><label class="coq-extra-goals-label" for="document-v-rst-chk12">1 more goal</label><div class="coq-extra-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(even n = true &lt;-&gt; Even n) /\ (even (S n) = true &lt;-&gt; Even (S n))</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">(even (S n) = true &lt;-&gt; Even (S n)) /\
(even n = true &lt;-&gt; Even (S (S n)))</span></div></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk13" type="checkbox"><label class="coq-input" for="document-v-rst-chk13"><span class="highlight">- <span class="c">(* n ← 0 *)</span></span></label><div class="coq-output" id="document-v-rst-goale"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">(true = true &lt;-&gt; Even <span class="mi">0</span>) /\ (false = true &lt;-&gt; Even <span class="mi">1</span>)</span></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk14" type="checkbox"><label class="coq-input" for="document-v-rst-chk14"><span class="highlight"><span class="kp">repeat</span> <span class="nb">split</span>; <span class="nb">cbn</span>.</span></label><div class="coq-output" id="document-v-rst-goalf"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">true = true -&gt; Even <span class="mi">0</span></span></div></div><input class="coq-extra-goals-toggle" id="document-v-rst-chk15" type="checkbox"><label class="coq-extra-goals-label" for="document-v-rst-chk15">2 more goals</label><div class="coq-extra-goals"><div class="coq-goal"><div class="goal-hyps"></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">false = true -&gt; Even <span class="mi">1</span></span></div></div><div class="coq-goal"><div class="goal-hyps"></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">Even <span class="mi">1</span> -&gt; false = true</span></div></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk16" type="checkbox"><label class="coq-input" for="document-v-rst-chk16"><span class="highlight"><span class="kp">all</span>: <span class="kp">try</span> <span class="nb">constructor</span>.</span></label><div class="coq-output" id="document-v-rst-goal10"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">false = true -&gt; Even <span class="mi">1</span></span></div></div><input class="coq-extra-goals-toggle" id="document-v-rst-chk17" type="checkbox"><label class="coq-extra-goals-label" for="document-v-rst-chk17">1 more goal</label><div class="coq-extra-goals"><div class="coq-goal"><div class="goal-hyps"></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">Even <span class="mi">1</span> -&gt; false = true</span></div></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kp">all</span>: <span class="nb">inversion</span> <span class="mi">1</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk18" type="checkbox"><label class="coq-input" for="document-v-rst-chk18"><span class="highlight">- <span class="c">(* n ← S _ *)</span></span></label><div class="coq-output" id="document-v-rst-goal11"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(even n = true &lt;-&gt; Even n) /\ (even (S n) = true &lt;-&gt; Even (S n))</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">(even (S n) = true &lt;-&gt; Even (S n)) /\
(even n = true &lt;-&gt; Even (S (S n)))</span></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk19" type="checkbox"><label class="coq-input" for="document-v-rst-chk19"><span class="highlight"><span class="nb">destruct</span> IHn <span class="kr">as</span> ((Hne &amp; HnE) &amp; (HSne &amp; HSnE)).</span></label><div class="coq-output" id="document-v-rst-goal12"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even n = true -&gt; Even n</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HnE</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Even n -&gt; even n = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HSne</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even (S n) = true -&gt; Even (S n)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HSnE</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Even (S n) -&gt; even (S n) = true</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">(even (S n) = true &lt;-&gt; Even (S n)) /\
(even n = true &lt;-&gt; Even (S (S n)))</span></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk1a" type="checkbox"><label class="coq-input" for="document-v-rst-chk1a"><span class="highlight"><span class="kp">repeat</span> <span class="nb">split</span>; <span class="nb">cbn</span>.</span></label><div class="coq-output" id="document-v-rst-goal13"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even n = true -&gt; Even n</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HnE</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Even n -&gt; even n = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HSne</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even (S n) = true -&gt; Even (S n)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HSnE</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Even (S n) -&gt; even (S n) = true</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">even (S n) = true -&gt; Even (S n)</span></div></div><input class="coq-extra-goals-toggle" id="document-v-rst-chk1b" type="checkbox"><label class="coq-extra-goals-label" for="document-v-rst-chk1b">3 more goals</label><div class="coq-extra-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even n = true -&gt; Even n</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HnE</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Even n -&gt; even n = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HSne</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even (S n) = true -&gt; Even (S n)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HSnE</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Even (S n) -&gt; even (S n) = true</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">Even (S n) -&gt; even (S n) = true</span></div></div><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even n = true -&gt; Even n</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HnE</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Even n -&gt; even n = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HSne</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even (S n) = true -&gt; Even (S n)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HSnE</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Even (S n) -&gt; even (S n) = true</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">even n = true -&gt; Even (S (S n))</span></div></div><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even n = true -&gt; Even n</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HnE</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Even n -&gt; even n = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HSne</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even (S n) = true -&gt; Even (S n)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HSnE</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Even (S n) -&gt; even (S n) = true</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">Even (S (S n)) -&gt; even n = true</span></div></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk1c" type="checkbox"><label class="coq-input" for="document-v-rst-chk1c"><span class="highlight"><span class="kp">all</span>: <span class="nb">eauto using</span> EvenS.</span></label><div class="coq-output" id="document-v-rst-goal14"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hne</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even n = true -&gt; Even n</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HnE</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Even n -&gt; even n = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HSne</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">even (S n) = true -&gt; Even (S n)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">HSnE</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Even (S n) -&gt; even (S n) = true</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">Even (S (S n)) -&gt; even n = true</span></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">inversion</span> <span class="mi">1</span>; <span class="nb">eauto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre></div>
<div class="section" id="writing-a-fixpoint">
<h1>Writing a fixpoint</h1>
<p>But writing a fixpoint is much nicer:</p>
<pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="document-v-rst-chk1d" type="checkbox"><label class="coq-input" for="document-v-rst-chk1d"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">even_Even_fp</span> (<span class="nv">n</span>: nat):
  even n = true &lt;-&gt; Even n.</span></label><div class="coq-output" id="document-v-rst-goal15"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">even_Even_fp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
even n0 = true &lt;-&gt; Even n0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">even n = true &lt;-&gt; Even n</span></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="document-v-rst-chk1e" type="checkbox"><label class="coq-input" for="document-v-rst-chk1e"><span class="highlight"><span class="kn">Proof</span>.</span></label><div class="coq-output" id="document-v-rst-goal16"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">even_Even_fp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
even n0 = true &lt;-&gt; Even n0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">even n = true &lt;-&gt; Even n</span></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk1f" type="checkbox"><label class="coq-input" for="document-v-rst-chk1f"><span class="highlight"><span class="nb">destruct</span> n <span class="kr">as</span> [ | [ | n ] ]; <span class="nb">cbn</span>.</span></label><div class="coq-output" id="document-v-rst-goal17"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">even_Even_fp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">true = true &lt;-&gt; Even <span class="mi">0</span></span></div></div><input class="coq-extra-goals-toggle" id="document-v-rst-chk20" type="checkbox"><label class="coq-extra-goals-label" for="document-v-rst-chk20">2 more goals</label><div class="coq-extra-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">even_Even_fp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">false = true &lt;-&gt; Even <span class="mi">1</span></span></div></div><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">even_Even_fp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
even n0 = true &lt;-&gt; Even n0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">even n = true &lt;-&gt; Even (S (S n))</span></div></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk21" type="checkbox"><label class="coq-input" for="document-v-rst-chk21"><span class="highlight">- <span class="c">(* n ← 0 *)</span></span></label><div class="coq-output" id="document-v-rst-goal18"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">even_Even_fp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">true = true &lt;-&gt; Even <span class="mi">0</span></span></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kp">repeat</span> <span class="nb">constructor</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk22" type="checkbox"><label class="coq-input" for="document-v-rst-chk22"><span class="highlight">- <span class="c">(* n ← 1 *)</span></span></label><div class="coq-output" id="document-v-rst-goal19"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">even_Even_fp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">false = true &lt;-&gt; Even <span class="mi">1</span></span></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">split</span>; <span class="nb">inversion</span> <span class="mi">1</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk23" type="checkbox"><label class="coq-input" for="document-v-rst-chk23"><span class="highlight">- <span class="c">(* n ← S (S _) *)</span></span></label><div class="coq-output" id="document-v-rst-goal1a"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">even_Even_fp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
even n0 = true &lt;-&gt; Even n0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">even n = true &lt;-&gt; Even (S (S n))</span></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk24" type="checkbox"><label class="coq-input" for="document-v-rst-chk24"><span class="highlight"><span class="nb">split</span>.</span></label><div class="coq-output" id="document-v-rst-goal1b"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">even_Even_fp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
even n0 = true &lt;-&gt; Even n0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">even n = true -&gt; Even (S (S n))</span></div></div><input class="coq-extra-goals-toggle" id="document-v-rst-chk25" type="checkbox"><label class="coq-extra-goals-label" for="document-v-rst-chk25">1 more goal</label><div class="coq-extra-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">even_Even_fp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
even n0 = true &lt;-&gt; Even n0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">Even (S (S n)) -&gt; even n = true</span></div></div></div></div></div></div><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk26" type="checkbox"><label class="coq-input" for="document-v-rst-chk26"><span class="highlight">+</span></label><div class="coq-output" id="document-v-rst-goal1c"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">even_Even_fp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
even n0 = true &lt;-&gt; Even n0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">even n = true -&gt; Even (S (S n))</span></div></div></div></div></div><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">constructor</span>; <span class="nb">apply</span> even_Even_fp; <span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input checked="checked" class="coq-toggle" id="document-v-rst-chk27" type="checkbox"><label class="coq-input" for="document-v-rst-chk27"><span class="highlight">+</span></label><div class="coq-output" id="document-v-rst-goal1d"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><div class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">even_Even_fp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
even n0 = true &lt;-&gt; Even n0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><div class="goal-separator"><hr></div><div class="goal-conclusion"><span class="highlight">Even (S (S n)) -&gt; even n = true</span></div></div></div></div></div><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">inversion</span> <span class="mi">1</span>; <span class="nb">apply</span> even_Even_fp; <span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre></div>
</div>
</div></body>
</html>
